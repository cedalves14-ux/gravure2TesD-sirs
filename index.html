<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Gravure2TesDésirs — Boutique Telegram</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --bg:#0f0f1a;
  --card:#ffffff;
  --accent:#00ff66;
  --accent-dark:#009944;
  --success:#28a745;
  --muted:#6b7280;
  --radius:12px;
  --gap:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,"Segoe UI",Arial,sans-serif;
  background:var(--bg);
  color:#fff;
  position:relative;
}
body::before{
  content:"";
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:url('header2.png') center/cover no-repeat;
  filter:blur(25px) brightness(0.35);
  z-index:-1;
}
header{
  position:sticky;
  top:0;
  z-index:40;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(4px);
  padding:8px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  box-shadow:0 1px 0 rgba(0,0,0,0.3);
}
header img{height:60px;object-fit:contain;display:block}
.language-switch{display:flex;gap:8px;align-items:center}
.language-switch img{width:30px;height:20px;cursor:pointer;border:1px solid #ccc;border-radius:3px;}
main{padding:16px;max-width:1100px;margin:0 auto}
h2{margin:8px 0 12px;font-size:1.05rem;color:#00ff66}
.category-select {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
  transition: background .2s;
}
.category-select:hover {background: var(--accent-dark);}
.grid{display:grid;grid-template-columns: repeat(2, 1fr);gap:var(--gap);margin-bottom:18px}
.card{background:var(--card);border-radius:var(--radius);overflow:hidden;box-shadow:0 6px 18px rgba(12,18,28,0.3);cursor:pointer;display:flex;flex-direction:column;transition:transform .16s,box-shadow .16s}
.card:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 14px 30px rgba(12,18,28,0.5)}
.media-wrap{height:140px;overflow:hidden;background:#111;display:flex;align-items:center;justify-content:center}
.media-wrap img,.media-wrap video{width:100%;height:100%;object-fit:cover}
.card-body{padding:12px;display:flex;flex-direction:column;gap:8px;flex:1;justify-content:space-between}
.card h3{margin:0;font-size:1rem;color:#111;text-align:center}
.badge{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(0,0,0,0.06);color:var(--muted);font-size:13px;text-align:center;margin:auto 0 0}
#product-page{display:none;padding-top:8px}
.product-card{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:0 12px 30px rgba(12,18,28,0.3)}
.product-media{width:100%;height:260px;border-radius:10px;overflow:hidden;background:#eee;display:flex;align-items:center;justify-content:center;margin-bottom:12px}
.product-media img,.product-media video{width:100%;height:100%;object-fit:cover}
.desc{color:var(--muted);line-height:1.45;margin-bottom:8px}
.variants,.variants-quantity{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
.variant-btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600;background:#f3f6f9;color:#111;transition:transform .1s, background .2s, color .2s;flex:1 1 calc(50% - 8px);text-align:center;display:flex;flex-direction:column;align-items:center;min-height:80px;}
.variant-btn.selected{background:var(--accent);color:white;transform:scale(1.05);}
.variant-btn img{width:100%;max-width:100px;margin-bottom:6px;border-radius:6px;}
#uploadedPreview{margin-top:10px;max-width:100%;border-radius:8px;display:none;}
.price{margin-top:8px;font-weight:700;font-size:1.15rem;color:var(--success)}
.actions{display:grid;gap:10px;margin-top:12px}
.btn{padding:12px;border-radius:10px;border:none;cursor:pointer;font-weight:700;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .1s}
.btn:active{transform:scale(0.96)}
.btn-buy{background:var(--success);color:white}
.btn-contact{background:var(--accent);color:white}
.btn-back{background:#eef2f7;color:#111}
#categoryModal {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:100;}
.modal-content {background:#1f1f2e;padding:24px;border-radius:16px;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,0.6);max-width:400px;}
.modal-content h2 {margin-bottom:20px;color:#fff;}
.category-options {display:flex;gap:20px;justify-content:center;}
.category-btn {border:none;background:none;cursor:pointer;text-align:center;color:#fff;font-weight:700;transition:transform .2s;}
.category-btn img {width:120px;height:120px;border-radius:12px;object-fit:cover;display:block;margin-bottom:8px;}
.category-btn:hover {transform:scale(1.05);}
</style>
</head>
<body>

<div id="categoryModal">
  <div class="modal-content">
    <h2 data-i18n="welcome">Bienvenue chez Gravure2TesDésirs</h2>
    <div class="category-options">
      <button class="category-btn" id="btnProduits">
        <img src="produitsgravés.jpg" alt="Produits personnalisés"/>
        <span data-i18n="ourProducts">Nos produits personnalisés</span>
      </button>
      <button class="category-btn" id="btnPersonnalisation">
        <img src="personnalisation sur demande.jpg" alt="Demande spéciale"/>
        <span data-i18n="customRequest">Votre personnalisation gravure ajustée</span>
      </button>
    </div>
  </div>
</div>

<header>
  <img src="Header2.png" alt="Gravure2TesDésirs"/>
  <div class="language-switch">
    <img src="https://flagcdn.com/w20/fr.png" alt="FR" data-lang="fr">
    <img src="https://flagcdn.com/w20/gb.png" alt="EN" data-lang="en">
    <img src="https://flagcdn.com/w20/es.png" alt="ES" data-lang="es">
    <img src="https://flagcdn.com/w20/pt.png" alt="PT" data-lang="pt">
  </div>
  <select id="categorySelect" class="category-select">
    <option value="" disabled selected data-i18n="chooseCategory">Choisir une catégorie</option>
  </select>
</header>

<main>
  <section id="home-page">
    <h2 id="category-title" data-i18n="availableProducts">Produits disponibles</h2>
    <div class="grid" id="products-grid"></div>
  </section>

  <section id="product-page">
    <div class="product-card">
      <div class="product-media" id="product-media"></div>
      <h3 id="product-title"></h3>
      <p class="desc" id="product-desc"></p>

      <div class="variants" id="variants-container"></div>
      <div class="variants-quantity" id="variants-quantity"></div>

      <div style="margin-top:12px;">
        <label for="customUpload" id="label-upload" style="font-weight:600;" data-i18n="upload">Envoyez votre gravure :</label>
        <input type="file" id="customUpload" accept="image/*"/>
        <img id="uploadedPreview" src="" alt="">
      </div>

      <div class="price" id="price"></div>
      <div class="actions">
        <button class="btn btn-buy" id="buyBtn" data-i18n="buyBtn">Envoyer ma demande à Gravure2TesDésirs</button>
        <a href="https://t.me/k3ks9" target="_blank" class="btn btn-contact" data-i18n="contactTelegram">Contact Telegram</a>
        <button class="btn btn-back" id="backBtn" data-i18n="backBtn">← Retour</button>
      </div>
    </div>
  </section>
</main>

<script>
const variants = [
  {label:"1 pièce", price:10},
  {label:"5 pièces", price:45},
  {label:"10 pièces", price:85},
  {label:"20 pièces", price:160}
];

const models = [
  {name:"Modèle A", img:"Header2.png"},
  {name:"Modèle B", img:"gravureonepiece.png"},
  {name:"Modèle C", img:"Header2.png"}
];

const productTranslations = {
  "Mariage / Anniversaire":{
    fr:[ {title:"Coffret Mariage", desc:"Un coffret gravé unique pour votre mariage."},{title:"Plaque Anniversaire", desc:"Un souvenir gravé pour vos proches."} ],
    en:[ {title:"Wedding Box", desc:"A unique engraved box for your wedding."},{title:"Birthday Plaque", desc:"A memorable engraved gift for your loved ones."} ]
  },
  "Gaming Gravure":{
    fr:[ {title:"Gravure PC Gamer", desc:"Vitre personnalisable selon vos envies."} ],
    en:[ {title:"Gaming PC Engraving", desc:"Customizable glass panel for your PC."} ]
  }
};

const translations = {
  fr:{ welcome:"Bienvenue chez Gravure2TesDésirs", ourProducts:"Nos produits personnalisés", customRequest:"Votre personnalisation gravure ajustée", chooseCategory:"Choisir une catégorie", availableProducts:"Produits disponibles", buyBtn:"Envoyer ma demande à Gravure2TesDésirs", contactTelegram:"Contact Telegram", backBtn:"← Retour", upload:"Envoyez votre gravure :" },
  en:{ welcome:"Welcome to Gravure2TesDésirs", ourProducts:"Our personalized products", customRequest:"Your custom engraving request", chooseCategory:"Choose a category", availableProducts:"Available products", buyBtn:"Send my request", contactTelegram:"Telegram Contact", backBtn:"← Back", upload:"Upload your engraving:" }
};

let currentLang = "fr";
let currentCategory = null;
let currentProductIndex = 0;
let currentVariantIndex = 0;
let currentModelIndex = 0;
let uploadedFile = null;

const grid = document.getElementById("products-grid");
const home = document.getElementById("home-page");
const productPage = document.getElementById("product-page");
const productMedia = document.getElementById("product-media");
const productTitle = document.getElementById("product-title");
const productDesc = document.getElementById("product-desc");
const variantsContainer = document.getElementById("variants-container");
const variantsQuantity = document.getElementById("variants-quantity");
const priceDiv = document.getElementById("price");
const buyBtn = document.getElementById("buyBtn");
const backBtn = document.getElementById("backBtn");
const categoryTitle = document.getElementById("category-title");
const categorySelect = document.getElementById("categorySelect");
const customUpload = document.getElementById("customUpload");
const uploadedPreview = document.getElementById("uploadedPreview");

function translatePage() {
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if(translations[currentLang][key]) el.textContent = translations[currentLang][key];
  });
  if(currentCategory) showProductByIndex(currentProductIndex);
}

// Flags
document.querySelectorAll(".language-switch img").forEach(flag=>{
  flag.addEventListener("click", ()=> {
    currentLang = flag.dataset.lang;
    translatePage();
  });
});

// Load categories
Object.keys(productTranslations).forEach(cat=>{
  const opt = document.createElement("option");
  opt.value = cat;
  opt.textContent = cat;
  categorySelect.appendChild(opt);
});

function loadCategory(category){
  currentCategory = category;
  grid.innerHTML = "";
  categoryTitle.textContent = category;
  const products = productTranslations[category][currentLang];
  products.forEach((p,index)=>{
    const card = document.createElement("div");
    card.className="card";
    card.innerHTML = `<div class="media-wrap"><img src="Header2.png" alt=""></div>
                      <div class="card-body"><h3>${p.title}</h3><span class="badge">Voir détails</span></div>`;
    card.onclick = ()=>showProductByIndex(index);
    grid.appendChild(card);
  });
  home.style.display="block";
  productPage.style.display="none";
}

function showProductByIndex(index){
  currentProductIndex=index;
  const p=productTranslations[currentCategory][currentLang][index];
  home.style.display="none";
  productPage.style.display="block";
  productMedia.innerHTML=`<img src="${models[0].img}" alt="">`;
  productTitle.textContent=p.title;
  productDesc.textContent=p.desc;

  // Models selection
  variantsContainer.innerHTML="";
  models.forEach((m,i)=>{
    const btn=document.createElement("button");
    btn.className="variant-btn"+(i===0?" selected":"");
    btn.innerHTML=`<img src="${m.img}" alt="">${m.name}`;
    btn.onclick=()=>selectModel(i);
    variantsContainer.appendChild(btn);
  });
  currentModelIndex=0;

  // Quantity selection
  variantsQuantity.innerHTML="";
  variants.forEach((v,i)=>{
    const btn=document.createElement("button");
    btn.className="variant-btn"+(i===0?" selected":"");
    btn.textContent=`${v.label} — ${v.price}€`;
    btn.onclick=()=>selectVariant(i);
    variantsQuantity.appendChild(btn);
  });
  currentVariantIndex=0;

  uploadedPreview.src="";
  uploadedPreview.style.display="none";
  uploadedFile=null;

  updatePrice();
}

function selectModel(i){
  currentModelIndex=i;
  Array.from(variantsContainer.children).forEach((btn,idx)=>btn.classList.toggle("selected",idx===i));
  productMedia.innerHTML=`<img src="${models[i].img}" alt="">`;
}

function selectVariant(i){
  currentVariantIndex=i;
  Array.from(variantsQuantity.children).forEach((btn,idx)=>btn.classList.toggle("selected",idx===i));
  updatePrice();
}

function updatePrice(){ priceDiv.textContent=variants[currentVariantIndex].price+"€"; }

backBtn.onclick=()=>{ home.style.display="block"; productPage.style.display="none"; };
buyBtn.onclick=()=>{
  let msg=`Commande: ${productTranslations[currentCategory][currentLang][currentProductIndex].title}`;
  msg+=` — Modèle: ${models[currentModelIndex].name}`;
  msg+=` — ${variants[currentVariantIndex].label} à ${variants[currentVariantIndex].price}€`;
  if(uploadedFile) msg+=`\nFichier uploadé: ${uploadedFile.name}`;
  const telegramLink=`https://t.me/k3ks9?text=${encodeURIComponent(msg)}`;
  window.open(telegramLink,"_blank");
};

// Upload preview
customUpload.onchange=(e)=>{
  uploadedFile=e.target.files[0];
  if(uploadedFile){
    const reader=new FileReader();
    reader.onload=function(event){
      uploadedPreview.src=event.target.result;
      uploadedPreview.style.display="block";
    }
    reader.readAsDataURL(uploadedFile);
  }else{uploadedPreview.style.display="none";uploadedFile=null;}
}

// Category modal
document.getElementById("btnProduits").onclick=()=>{
  document.getElementById("categoryModal").style.display="none";
  loadCategory("Mariage / Anniversaire");
  categorySelect.value="Mariage / Anniversaire";
};
document.getElementById("btnPersonnalisation").onclick=()=>window.open('https://t.me/k3ks9','_blank');
categorySelect.onchange=()=>loadCategory(categorySelect.value);

translatePage();
</script>

</body>
</html>
